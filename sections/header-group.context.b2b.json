/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "parent": "header-group.json",
  "context": {
    "b2b": true
  },
  "sections": {
    "custom_liquid_A9iqz": {
      "type": "custom-liquid",
      "disabled": false,
      "settings": {
        "custom_liquid": "<script>\n// Hide Empty Collections - Fresh Check Version\n(function() {\n  const CACHE_KEY = 'b4l_empty_collections_menu'; // Only for menu items\n  const CACHE_DURATION = 1209600; // 14 days for menu cache\n  \n  // Add loading styles\n  const style = document.createElement('style');\n  style.textContent = `\n    /* Desktop loading styles */\n    .menu-loading-container {\n      display: flex;\n      gap: 12px;\n      align-items: center;\n      justify-content: center;\n      padding: 4px 2px;\n      min-height: 40px;\n    }\n    .menu-skeleton {\n      background: #f1f1f1;\n      border-radius: 6px;\n      height: 32px;\n      opacity: 0.6;\n      animation: pulse .75s ease-in-out infinite;\n      display: inline-block !important;\n    }\n    .menu-skeleton:nth-child(1) { width: 13%; }\n    .menu-skeleton:nth-child(2) { width: 9%; }\n    .menu-skeleton:nth-child(3) { width: 12%; }\n    .menu-skeleton:nth-child(4) { width: 14%; }\n    .menu-skeleton:nth-child(5) { width: 11%; }\n    .menu-skeleton:nth-child(6) { width: 8%; }\n    .menu-skeleton:nth-child(7) { width: 13%; }\n    .menu-skeleton:nth-child(8) { width: 9%; }\n    .menu-skeleton:nth-child(9) { width: 11%; }\n    \n    /* Hide desktop loading on mobile */\n    @media screen and (max-width: 989px) {\n      .header__inline-menu .menu-loading-container {\n        display: none;\n      }\n    }\n    \n    /* Mobile loading styles */\n    .mobile-menu-loading-container {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n      padding: 20px;\n    }\n    .mobile-menu-skeleton {\n      background: #f1f1f1;\n      border-radius: 6px;\n      height: 44px;\n      opacity: 0.6;\n      animation: pulse .75s ease-in-out infinite;\n      width: 100%;\n      display: block !important;\n    }\n    \n    /* Collection tabs loading styles */\n    .sub-cat-block.checking {\n      opacity: 0.7;\n      transition: opacity 0.3s ease;\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 0.6; }\n      50% { opacity: 0.3; }\n    }\n    \n    /* Hide empty collection tabs */\n    .sub-cat-tab.hidden-empty {\n      display: none !important;\n    }\n  `;\n  document.head.appendChild(style);\n  \n  // Extract collection handle from various URL formats\n  function extractCollectionHandle(url) {\n    if (!url) return null;\n    \n    // Remove domain if present\n    url = url.replace(/^https?:\\/\\/[^\\/]+/, '');\n    \n    // Match collection handle\n    const match = url.match(/\\/collections\\/([^\\/\\?#]+)/);\n    \n    if (match && match[1]) {\n      // Clean up the handle\n      return match[1].toLowerCase().trim();\n    }\n    \n    return null;\n  }\n  \n  // Check collection tabs without caching - fresh check every time\n  async function checkAndHideCollectionTabs() {\n    const tabsContainer = document.querySelector('.sub-cat-block');\n    if (!tabsContainer) return;\n    \n    console.log('Checking collection tabs...');\n    \n    // Get all tabs on current page\n    const tabs = tabsContainer.querySelectorAll('.sub-cat-tab');\n    if (tabs.length === 0) return;\n    \n    // Add subtle loading state\n    tabsContainer.classList.add('checking');\n    \n    // Collect handles from current page tabs only\n    const handlesToCheck = [];\n    const tabsByHandle = new Map();\n    \n    tabs.forEach(tab => {\n      const handle = extractCollectionHandle(tab.getAttribute('href'));\n      if (handle && handle !== 'all') {\n        handlesToCheck.push(handle);\n        if (!tabsByHandle.has(handle)) {\n          tabsByHandle.set(handle, []);\n        }\n        tabsByHandle.get(handle).push(tab);\n      }\n    });\n    \n    console.log(`Checking ${handlesToCheck.length} collections on this page`);\n    \n    // Check each collection\n    const promises = handlesToCheck.map(handle => \n      fetch(`/collections/${handle}/products.json?limit=1`)\n        .then(r => r.json())\n        .then(data => ({ \n          handle, \n          empty: !data.products || data.products.length === 0,\n          productCount: data.products?.length || 0\n        }))\n        .catch(err => {\n          console.error(`Error checking ${handle}:`, err);\n          return { handle, empty: false, error: true };\n        })\n    );\n    \n    const results = await Promise.all(promises);\n    \n    // Apply results immediately\n    let hiddenCount = 0;\n    let visibleCount = 0;\n    \n    results.forEach(result => {\n      const tabsForHandle = tabsByHandle.get(result.handle);\n      if (tabsForHandle) {\n        tabsForHandle.forEach(tab => {\n          if (result.empty) {\n            tab.classList.add('hidden-empty');\n            tab.style.setProperty('display', 'none', 'important');\n            hiddenCount++;\n            console.log(`✓ Hiding: ${result.handle} (0 products)`);\n          } else {\n            tab.classList.remove('hidden-empty');\n            tab.style.removeProperty('display');\n            visibleCount++;\n            console.log(`✗ Showing: ${result.handle} (${result.productCount} products)`);\n          }\n        });\n      }\n    });\n    \n    // Remove loading state\n    tabsContainer.classList.remove('checking');\n    \n    console.log(`Collection tabs complete - Hidden: ${hiddenCount}, Visible: ${visibleCount}`);\n  }\n  \n  // Handle menus with caching (these don't change between pages)\n  async function handleMenus() {\n    const cached = localStorage.getItem(CACHE_KEY);\n    const cachedData = cached ? JSON.parse(cached) : null;\n    const now = Date.now();\n    \n    // Use cache if valid for menus\n    if (cachedData && (now - cachedData.timestamp < CACHE_DURATION)) {\n      hideMenuItems(cachedData.emptyCollections);\n      return;\n    }\n    \n    // Otherwise fetch menu collections\n    console.log('Checking menu collections...');\n    \n    // Get menu handles only\n    const handles = new Set();\n    \n    // Desktop menu\n    document.querySelectorAll('.header__inline-menu a[href*=\"/collections/\"]').forEach(link => {\n      const handle = extractCollectionHandle(link.getAttribute('href'));\n      if (handle && handle !== 'all') handles.add(handle);\n    });\n    \n    // Mobile menu\n    document.querySelectorAll('#menu-drawer a[href*=\"/collections/\"]').forEach(link => {\n      const handle = extractCollectionHandle(link.getAttribute('href'));\n      if (handle && handle !== 'all') handles.add(handle);\n    });\n    \n    console.log(`Found ${handles.size} menu collections to check`);\n    \n    // Check collections\n    const emptyCollections = [];\n    const handlesArray = Array.from(handles);\n    \n    for (let i = 0; i < handlesArray.length; i += 5) {\n      const batch = handlesArray.slice(i, i + 5);\n      const promises = batch.map(handle => \n        fetch(`/collections/${handle}/products.json?limit=1`)\n          .then(r => r.json())\n          .then(data => ({ handle, empty: !data.products || data.products.length === 0 }))\n          .catch(() => ({ handle, empty: false }))\n      );\n      \n      const results = await Promise.all(promises);\n      results.forEach(result => {\n        if (result.empty) emptyCollections.push(result.handle);\n      });\n    }\n    \n    // Cache menu results\n    localStorage.setItem(CACHE_KEY, JSON.stringify({\n      timestamp: now,\n      emptyCollections: emptyCollections\n    }));\n    \n    // Apply to menus\n    hideMenuItems(emptyCollections);\n  }\n  \n  function hideMenuItems(emptyHandles) {\n    let hiddenCount = 0;\n    \n    // Convert to normalized set\n    const emptySet = new Set(emptyHandles.map(h => h.toLowerCase().trim()));\n    \n    // Hide empty collection links in menus\n    document.querySelectorAll('a[href*=\"/collections/\"]:not(.sub-cat-tab)').forEach(link => {\n      const handle = extractCollectionHandle(link.getAttribute('href'));\n      if (handle && emptySet.has(handle)) {\n        const li = link.closest('li');\n        if (li) {\n          li.style.display = 'none';\n          hiddenCount++;\n        }\n      }\n    });\n    \n    // Clean up empty menu sections...\n    // [Rest of menu cleanup code remains the same]\n    \n    return hiddenCount;\n  }\n  \n  // Simple initialization\n  async function initialize() {\n    console.log('Initializing empty collection hiding...');\n    \n    // Always fresh check collection tabs on this page\n    await checkAndHideCollectionTabs();\n    \n    // Handle menus (with cache)\n    await handleMenus();\n  }\n  \n  // Clear cache function now only affects menus\n  window.clearCollectionCache = function() {\n    localStorage.removeItem(CACHE_KEY);\n    console.log('Menu cache cleared. Refreshing...');\n    initialize();\n  };\n  \n  // Debug function for current page tabs\n  window.debugCollectionTabs = async function() {\n    const tabs = document.querySelectorAll('.sub-cat-tab');\n    console.log(`Found ${tabs.length} collection tabs on this page`);\n    \n    for (const tab of tabs) {\n      const handle = extractCollectionHandle(tab.getAttribute('href'));\n      if (handle) {\n        try {\n          const response = await fetch(`/collections/${handle}/products.json?limit=1`);\n          const data = await response.json();\n          console.log(`${handle}: ${data.products?.length || 0} products, Hidden: ${tab.classList.contains('hidden-empty')}`);\n        } catch (e) {\n          console.error(`Error checking ${handle}:`, e);\n        }\n      }\n    }\n  };\n  \n  // Run on DOM ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initialize);\n  } else {\n    // Small delay to ensure everything is rendered\n    setTimeout(initialize, 100);\n  }\n  \n  // Re-run on Shopify navigation events\n  document.addEventListener('page:load', initialize);\n  document.addEventListener('turbo:load', initialize);\n  \n  // Also run when window fully loads (catches very late content)\n  window.addEventListener('load', () => {\n    setTimeout(checkAndHideCollectionTabs, 500);\n  });\n})();\n</script>\n\n<style>\n.main-menu-bonus-links{\ndisplay:none;\n}\n</style>",
        "color_scheme": "",
        "header-48f761cac8a6449dd99d3ba7f9f2fe58": null,
        "padding_top": 0,
        "padding_bottom": 0
      },
      "blocks": {},
      "block_order": [],
      "name": "t:sections.custom-liquid.presets.name"
    },
    "custom_liquid_jKfxR8": {
      "settings": {
        "custom_liquid": "<div class=\"top-bar large-up-hide\">\n\n<div class=\"top-bar-m-btn\">\n<a href=\"tel:020-3481-1978\">\n<div class=\"tb-m-icon\">\n<svg width=\"26px\" height=\"28px\" viewBox=\"-2.4 -2.4 28.80 28.80\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> <path d=\"M16.5562 12.9062L16.1007 13.359C16.1007 13.359 15.0181 14.4355 12.0631 11.4972C9.10812 8.55901 10.1907 7.48257 10.1907 7.48257L10.4775 7.19738C11.1841 6.49484 11.2507 5.36691 10.6342 4.54348L9.37326 2.85908C8.61028 1.83992 7.13596 1.70529 6.26145 2.57483L4.69185 4.13552C4.25823 4.56668 3.96765 5.12559 4.00289 5.74561C4.09304 7.33182 4.81071 10.7447 8.81536 14.7266C13.0621 18.9492 17.0468 19.117 18.6763 18.9651C19.1917 18.9171 19.6399 18.6546 20.0011 18.2954L21.4217 16.883C22.3806 15.9295 22.1102 14.2949 20.8833 13.628L18.9728 12.5894C18.1672 12.1515 17.1858 12.2801 16.5562 12.9062Z\" fill=\"#fff\"></path></svg>\n\n</div>\n<div class=\"tb-m-label\">\nCall Us\n</div>\n</a>\n</div>\n<div class=\"top-bar-m-btn\">\n<a href=\"/pages/contact-us\"><div class=\"tb-m-icon\">\n<svg width=\"26px\" height=\"26px\" viewBox=\"0 0 6.3500002 6.3500002\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"#fff\"><path d=\"m 0.87513983,0.92604163 c -0.4802584,0 -0.8748817925,0.39462207 -0.8748817925,0.87488207 v 2.7481528 c 0,0.4802611 0.3946233925,0.8748819 0.8748817925,0.8748819 H 5.4748603 c 0.4802585,0 0.8748817,-0.3946208 0.8748817,-0.8748819 V 1.8009237 c 0,-0.48026 -0.3946232,-0.87488207 -0.8748817,-0.87488207 z M 1.2549624,1.984375 a 0.264583,0.264583 0 0 1 0.1829329,0.06873 l 1.2774428,1.1539337 c 0.2490602,0.2251498 0.6728487,0.2251498 0.9219063,0 l 1.2769268,-1.153934 a 0.264583,0.264583 0 0 1 0.1839674,-0.068213 0.264583,0.264583 0 0 1 0.1912012,0.08785 0.264583,0.264583 0 0 1 -0.019632,0.3725873 l -0.7761817,0.7017658 0.1472777,0.1462455 0.6387227,0.63872 a 0.264583,0.264583 0 0 1 0,0.3746527 0.264583,0.264583 0 0 1 -0.3751713,0 L 4.266151,3.6679928 4.1007864,3.5015964 3.9922649,3.5997806 c -0.4586684,0.4146206 -1.173779,0.4146206 -1.632458,0 L 2.251804,3.5021123 2.0864394,3.6679928 1.4477167,4.3067129 a 0.264583,0.264583 0 0 1 -0.3751713,0 0.264583,0.264583 0 0 1 0,-0.3746527 L 1.7112681,3.2933402 1.8585458,3.1470947 1.0823641,2.4453289 A 0.264583,0.264583 0 0 1 1.062732,2.0727416 0.264583,0.264583 0 0 1 1.2549677,1.984375 Z\"></path> </svg>\n</div>\n<div class=\"tb-m-label\">\nEmail Us\n</div>\n</a>\n</div>\n\n<div class=\"top-bar-m-btn\">\n<a href=\"https://wa.me/447887845565\">\n<div class=\"tb-m-icon\">\n<svg width=\"26px\" height=\"26px\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6.014 8.00613C6.12827 7.1024 7.30277 5.87414 8.23488 6.01043L8.23339 6.00894C9.14051 6.18132 9.85859 7.74261 10.2635 8.44465C10.5504 8.95402 10.3641 9.4701 10.0965 9.68787C9.7355 9.97883 9.17099 10.3803 9.28943 10.7834C9.5 11.5 12 14 13.2296 14.7107C13.695 14.9797 14.0325 14.2702 14.3207 13.9067C14.5301 13.6271 15.0466 13.46 15.5548 13.736C16.3138 14.178 17.0288 14.6917 17.69 15.27C18.0202 15.546 18.0977 15.9539 17.8689 16.385C17.4659 17.1443 16.3003 18.1456 15.4542 17.9421C13.9764 17.5868 8 15.27 6.08033 8.55801C5.97237 8.24048 5.99955 8.12044 6.014 8.00613Z\" fill=\"#fff\"></path> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12 23C10.7764 23 10.0994 22.8687 9 22.5L6.89443 23.5528C5.56462 24.2177 4 23.2507 4 21.7639V19.5C1.84655 17.492 1 15.1767 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23ZM6 18.6303L5.36395 18.0372C3.69087 16.4772 3 14.7331 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C11.0143 21 10.552 20.911 9.63595 20.6038L8.84847 20.3397L6 21.7639V18.6303Z\" fill=\"#fff\"></path></svg>\n</div>\n<div class=\"tb-m-label\">\nWhatsApp\n</div>\n</a>\n</div>\n\n<div class=\"top-bar-m-btn\">\n\n<div class=\"vat_toggle toggle_btn\">\n<input type=\"checkbox\" checked=\"true\" class=\"vatToggle\">\n</div>\n<div class=\"tb-m-label\">\nInc. VAT?\n</div>\n\n</div>\n\n</div>\n\n\n<div class=\"top-bar page-width small-hide medium-hide\">\n\n<div class=\"top-bar-left\"><p><span class=\"num-h\">✆ Call us at <a href=\"tel:020-3481-1978\">020-3481-1978</a></span><span class=\"divider-h\">&nbsp;&nbsp; | &nbsp;&nbsp;</span><span class=\"email-h\"><a href=\"/pages/contact-us\">✉ Email us </a></span>\n<span class=\"divider-h\">&nbsp;&nbsp; | &nbsp;&nbsp;</span>\n<span class=\"whatsapp-h\"><a onclick=\"openWhatsApp()\"><svg width=\"17px\" height=\"17px\" viewBox=\"0 1 22 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6.014 8.00613C6.12827 7.1024 7.30277 5.87414 8.23488 6.01043L8.23339 6.00894C9.14051 6.18132 9.85859 7.74261 10.2635 8.44465C10.5504 8.95402 10.3641 9.4701 10.0965 9.68787C9.7355 9.97883 9.17099 10.3803 9.28943 10.7834C9.5 11.5 12 14 13.2296 14.7107C13.695 14.9797 14.0325 14.2702 14.3207 13.9067C14.5301 13.6271 15.0466 13.46 15.5548 13.736C16.3138 14.178 17.0288 14.6917 17.69 15.27C18.0202 15.546 18.0977 15.9539 17.8689 16.385C17.4659 17.1443 16.3003 18.1456 15.4542 17.9421C13.9764 17.5868 8 15.27 6.08033 8.55801C5.97237 8.24048 5.99955 8.12044 6.014 8.00613Z\" fill=\"#fff\"></path> <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12 23C10.7764 23 10.0994 22.8687 9 22.5L6.89443 23.5528C5.56462 24.2177 4 23.2507 4 21.7639V19.5C1.84655 17.492 1 15.1767 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23ZM6 18.6303L5.36395 18.0372C3.69087 16.4772 3 14.7331 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C11.0143 21 10.552 20.911 9.63595 20.6038L8.84847 20.3397L6 21.7639V18.6303Z\" fill=\"#fff\"></path></svg> WhatsApp</a></span>\n </p>\n</div>\n<div class=\"top-bar-right\">\n<div class=\"vat_toggle toggle_btn\">\n          <span>Ex. VAT</span><input type=\"checkbox\" checked=\"true\" class=\"vatToggle\"><span>Inc. VAT</span>\n</div>\n{% unless customer and customer.b2b? %}<a href=\"/pages/build4less-online-trade-with-marketfinance\">★ Open a trade account</a>\n{% endunless %}\n</div>"
      },
      "blocks": {}
    }
  },
  "order": [
    "custom_liquid_jKfxR8",
    "header",
    "custom_liquid_A9iqz"
  ]
}
